<!-- Launch the diff_drive world and spawn the robot urdf file-->
<launch>
  <arg name="use_gui" default="True" description="Run the gazebo gui" />
  <gz_server
      world_sdf_string="ddrive"
      world_sdf_file="ddrive.world.sdf"
      create_own_container="True"
      use_composition="True" />

  <gz_spawn_model
    world=""
    file=""
    model_string="$(command '$(exec-in-pkg xacro xacro) $(find-pkg-share diff_drive)/urdf/ddrive.urdf.xacro')"
    topic=""
    entity_name="ddrive"
    allow_renaming="False"
    x="0.0" y="0.0" z="0.10" roll="" pitch="" yaw=""/>

 <ros_gz_bridge
      use_composition="True"
      bridge_name="bridge"
      config_file="$(find-pkg-share diff_drive)/launch/bridge.yaml"/>

  <executable cmd="gz sim -g" if="$(var use_gui)" on_exit="shutdown" />
  <include file="$(find-pkg-share diff_drive)/launch/ddrive_rviz.launch.xml"/>
</launch>